<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: js/ndef_utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: js/ndef_utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* -*- Mode: js; js-indent-level: 2; indent-tabs-mode: nil -*- */
/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */

/* Copyright Â© 2013, Deutsche Telekom, Inc. */

/* globals MozNDEFRecord, NDEF, NfcUtils, NfcBuffer */
/* exported NDEFUtils */
'use strict';


/*******************************************************************************
 * NDEFUtils offers a set of utility functions to handle NDEF messages
 * according to NFCForum-TS-NDEF_1.0. It exports the following functions:
 *
 * - parseHandoverNDEF: parse a NDEF message that represents a handover request
 *         or a handover select message
 * - searchForBluetoothAC: search for a Bluetooth Alternate Carrier in a
 *         handover NDEF message
 * - parseBluetoothSSP: Parses a Carrier Data Record that contains a
 *         Bluetooth Secure Simple Pairing record
 * - encodeHandoverRequest: returns a NDEF message that contains a handover
 *         request message
 * - encodeHandoverSelect: returns a NDEF message that contains a handover
 *         select message
 */
var NDEFUtils = {

  DEBUG: false,

  /*****************************************************************************
   *****************************************************************************
   * Utility functions/classes
   *****************************************************************************
   ****************************************************************************/

  /**
   * Debug method
   */
  _debug: function _debug(msg, optObject) {
    if (this.DEBUG) {
      this._logVisibly(msg, optObject);
    }
  },

  _logVisibly: function _logVisibly(msg, optObject) {
    var output = '[NDEFUtils]: ' + msg;
    if (optObject) {
      output += JSON.stringify(optObject);
    }
    console.log(output);
  },

   /**
   * Parse Handover Request NDEF message. Only 'Hr' and 'Hs' records
   * are supported (NFCForum-TS-ConnectionHandover_1_2.doc).
   *
   * Returns handover object similar to:
   * {
   *   majorVersion: 1,
   *   minorVersion: 2,
   *   type: 'Hr'         // or 'Hs'
   *   cr: 123            // 'Hr' only
   *   ac: [              // Array of BT OOB records
   *     {
   *       cps: 1,
   *       cdr: ...       // MozNDEFRecord with details, i.e.
   *     },               // Bluetooth MAC address.
   *     ...
   *   ]
   * }
   *
   * @param {Array} ndefMsg NDEF message (array of MozNDEFRecords)
   * @return {Object} Parsed handover request or null if ndefMsg
   *                  was not valid or well formatted.
   */
  parseHandoverNDEF: function parseHandoverNDEF(ndefMsg) {
    try {
      return this._doParseHandoverNDEF(ndefMsg);
    } catch (err) {
      this._logVisibly(err);
      return null;
    }
  },

  _doParseHandoverNDEF: function doParseHandoverNDEF(msg) {
    var nfcUtils = new NfcUtils();
    var hRecordBuffer = new NfcBuffer(msg[0].payload);
    var version = hRecordBuffer.getOctet();

    var h = {
      majorVersion: version >>> 4,
      minorVersion: version &amp; 0x0f,
      type: nfcUtils.toUTF8(msg[0].type),
      ac: []
    };

    if (msg[0].tnf !== NDEF.TNF_WELL_KNOWN) {
      throw Error('Expected Well Known TNF in Hs/Hr record');
    }

    if (['Hs', 'Hr'].indexOf(h.type) &lt; 0) {
      throw Error('Record "' + h.type + '" not supported.');
    }

    var hRecord = nfcUtils.parseNDEF(hRecordBuffer);
    if (!hRecord) {
      throw Error('Could not parse embedded NDEF in Hr/Hs record');
    }

    if (hRecordBuffer.offset &lt; msg[0].payload.length) {
      throw Error('Embedded NDEF payload contains extraneous bytes');
    }

    for (var i = 0; i &lt; hRecord.length; i += 1) {
      var type = nfcUtils.toUTF8(hRecord[i].type);
      if ('ac' === type) {
        h.ac.push(this._parseAlternativeCarrier(hRecord[i].payload, msg));
      } else if ('cr' === type) {
        h.cr = this._parseCollisionResolution(hRecord[i].payload);
      }
    }

    // Make sure collision resolution record is present
    // in Hr message.
    if ('Hr' === h.type &amp;&amp; !h.cr) {
      throw Error('Collision resolution record missing');
    }

    return h;
  },

  _parseAlternativeCarrier: function _parseAlternativeCarrier(bytes, msg) {
    var nfcUtils = new NfcUtils();
    var b = new NfcBuffer(bytes);
    var ac = {
      cps: b.getOctet() &amp; 0x03
    };

    var recordId = b.getOctetArray(b.getOctet());
    ac.cdr = msg.filter(function(record) {
      return nfcUtils.equalArrays(record.id, recordId);
    }.bind(this))[0];

    if (!ac.cdr) {
      throw Error('Could not find record with given id');
    }

    return ac;
  },

  _parseCollisionResolution: function _parseCollisionResolution(bytes) {
    if (bytes.length !== 2) {
      throw Error('Expected random number in Collision Resolution Record');
    }

    return (bytes[0] &lt;&lt; 8) | bytes[1];
  },

   /**
    * Returns first record from handover message which
    * contains Bluetooth OOB (Out of Band) data.
    *
    * @param {Array} h Handover message (array of records).
    * @return {Object} MozNDEFRecord with Bluetooth OOB.
    */
  searchForBluetoothAC: function searchForBluetoothAC(h) {
    var nfcUtils = new NfcUtils();
    for (var i = 0; i &lt; h.ac.length; i++) {
      var cdr = h.ac[i].cdr;
      if (cdr.tnf === NDEF.TNF_MIME_MEDIA) {
        if (nfcUtils.equalArrays(cdr.type, NDEF.MIME_BLUETOOTH_OOB)) {
          return cdr;
        }
      }
    }
    return null;
  },

  /**
   * Parses a Carrier Data Record according to NFCForum-AD-BTSSP_1.0.
   * This method will parse MAC address. In addition to that, it will
   * parse, if found in EIR data, Bluetooth Local Name. Other EIR fields
   * are currently unsupported.
   *
   * @param {Object} cdr Carrier Data Record. It's payload field should
   *                     contain Bluetooth OOB data.
   * @returns {Object} Parsed record. Will always contain 'mac' property.
   *                   If BT local name was present in cdr, will also have
   *                   'localName' property. Null if cdr was invalid.
   */
  parseBluetoothSSP: function parseBluetoothSSP(cdr) {
    var nfcUtils = new NfcUtils();
    if (!cdr || !cdr.payload || cdr.payload.length &lt; 8) {
      return null;
    }

    var btssp = {};
    var buf = new NfcBuffer(cdr.payload);

    var btsspLen = buf.getOctet() | (buf.getOctet() &lt;&lt; 8);
    if (cdr.payload.length !== btsspLen) {
      this._debug('Invalid BT SSP record. Length indicated:' +
        btsspLen + ', actual length: ' + cdr.payload.length);
      return null;
    }

    btssp.mac = this.formatMAC(buf.getOctetArray(6));

    while (buf.offset != cdr.payload.length) {
      // Read OOB value
      var len = buf.getOctet() - 1 /* 'len' */;
      var type = buf.getOctet();

      if (buf.offset + len > buf.uint8array.length) {
        this._debug('EIR field ' + type + ' indicated length=' +
          len + ', but only ' + (buf.uint8array.length - buf.offset) +
          ' characters left in buffer.');
        return null;
      }

      switch (type) {
      case 0x08:
      case 0x09:
        // Local name
        var n = buf.getOctetArray(len);
        btssp.localName = nfcUtils.toUTF8(n);
        break;
      default:
        // Ignore OOB value
        buf.skip(len);
        break;
      }
    }
    return btssp;
  },

  /**
   * Formats MAC address as a MAC-48 string (colon-separated).
   *
   * @param   {Array}   Array of six numbers representing MAC.
   * @returns {String}  MAC address.
   */
  formatMAC: function formatMAC(mac) {
    if (!mac || mac.length !== 6) {
      return null;
    }

    var res = [];
    for (var i = 0; i &lt; 6; i += 1) {
      var m = mac[i].toString(16);
      res.unshift(m.length === 1 ? '0' + m : m);
    }

    return res.join(':').toUpperCase();
  },

  /**
   * Parses Bluetooth MAC-48 address.
   *
   * @param   {String}  MAC address.
   * @returns {Array}   Array of six numbers representing MAC or null
   *                    if it was not valid.
   */
  parseMAC: function parseMAC(mac) {
    if (!mac || !/^([0-9A-F]{2}:){6}$/i.test(mac + ':')) {
      return null;
    }

    var macVals = mac.split(':');

    var m = [];
    for (var i = 5; i >= 0; i -= 1) {
      m.push(parseInt(macVals[i], 16));
    }

    return m;
  },

  /**
   * According to [CH] (Connection Handover Technical Specification),
   * CPS can be one of the following:
   *  - 0 - Inactive
   *  - 1 - Active
   *  - 2 - Activating
   *  - 3 - Unknown
   *
   * @params {Integer} cps Carrier Power State
   * @returns {Boolean} True when cps valid. False otherwise.
   */
  validateCPS: function validateCPS(cps) {
    var allowedValues = [NDEF.CPS_INACTIVE, NDEF.CPS_ACTIVE,
                         NDEF.CPS_ACTIVATING, NDEF.CPS_UNKNOWN];
    return (allowedValues.indexOf(cps) >= 0);
  },

  /**
   * Returns a Bluetooth Handover Request message. This method DOES
   * NOT implement a full set of arguments as defined in
   * NFCForum-AD-BTSSP_1.0.1.
   *
   * First record is a Handover Request Record (type="Hr"). It
   * contains CPS and 2-byte random value used for collision detection
   * (autogenerated).
   *
   * Second record contains Bluetooth OOB data. For explanation,
   * @see encodeHandoverSelect() and specification.
   *
   * @param {String}      mac           MAC address, ie.: "01:23:45:67:89:AB".
   * @param {Integer}     cps           Carrier Power State.
   * @returns {Array} NDEF records for handover select message.
   *
   */
  encodeHandoverRequest: function encodeHandoverRequest(mac, cps) {
    var nfcUtils = new NfcUtils();
    var m = this.parseMAC(mac);
    if (!m) {
      this._debug('Invalid BT MAC address: ' + mac);
      return null;
    }

    if (!this.validateCPS(cps)) {
      this._debug('Invalid CPS: ' + cps);
      return null;
    }

    var rndMSB = Math.floor(Math.random() * 0xff) &amp; 0xff;
    var rndLSB = Math.floor(Math.random() * 0xff) &amp; 0xff;

    var OOBLength = 2 + m.length;
    var OOB = [OOBLength, 0].concat(m);

    // Payload ID
    var pid = nfcUtils.fromUTF8('0');

    var hr = [
      new MozNDEFRecord({tnf: NDEF.TNF_WELL_KNOWN,
                         type: NDEF.RTD_HANDOVER_REQUEST,
                         payload: new Uint8Array([0x12, 0x91, 0x02, 0x02, 0x63,
                           0x72, rndMSB, rndLSB, 0x51, 0x02, 0x04, 0x61, 0x63,
                           cps, 0x01, pid[0], 0x00])}),
      new MozNDEFRecord({tnf: NDEF.TNF_MIME_MEDIA,
                         type: NDEF.MIME_BLUETOOTH_OOB,
                         id: pid,
                         payload: new Uint8Array(OOB)})];
    return hr;
  },

  /**
   * Returns a Bluetooth Handover Select message. This method
   * DOES NOT implement the full spec as defined in
   * NFCForum-AD-BTSSP_1.0.1. In particular, this method supports
   * only Bluetooth device MAC address and Local Name in the Bluetooth
   * Carrier Configuration Record.
   *
   * First record is Handover Select Record (type="Hs"). It contains,
   * among other things, the CPS (Carrier Power State).
   *
   * Second record of this message contains Bluetooth Out of Band (OOB) data.
   * It contains following fields:
   *  - [2 octets] OOB Data Length - Mandatory. Total length of OOB data,
   *                                 including this field itself.
   *  - [6 octets] BT Device Address - Mandatory. BT device address (MAC).
   *  - [N octets] OOB Optional Data - The remaining data in EIR format.
   *                                   This method supports only device name
   *                                   here.
   *
   * EIR data, as of this implementation, is optional. It will be ommited
   * if you do not pass btDeviceName parameter. If you do, OOB Optional
   * Data will be in a form:
   *   - [1  octet] EIR Data Length   - Does not include this field.
   *   - [1  octet] EIR Data Type     - only 0x09 (BT Local Name) supported.
   *   - [N octets] Contents          - BT Local Name
   *
   * @param {String}      mac           MAC address, ie.: "01:23:45:67:89:AB".
   * @param {Integer}     cps           Carrier Power State.
   * @param {UInt8Array}  btDeviceName  Optional, user-friendly name
   *                                    of Bluetooth device.
   * @returns {Array} NDEF records for handover select message.
   *
   */
  encodeHandoverSelect: function encodeHandoverSelect(mac, cps, btDeviceName) {
    var nfcUtils = new NfcUtils();
    var m = this.parseMAC(mac);
    if (!m) {
      this._debug('Invalid BT MAC address: ' + mac);
      return null;
    }

    if (!this.validateCPS(cps)) {
      this._debug('Invalid CPS: ' + cps);
      return null;
    }

    // OOB Data Length
    var OOBLength = 2 + m.length;

    // OOB = [Data Length | BT Device Address]
    var OOB = [OOBLength, 0].concat(m);

    // If btDeviceName supplied, attach EIR with it as OOB Optional Data
    // and update OOB Data Length accordingly.
    if (btDeviceName) {
      var EIRLength = 1 + btDeviceName.length;
      OOB[0] += EIRLength + 1;
      OOB = OOB.concat(EIRLength, 0x09, Array.apply([], btDeviceName));
    }

    // Payload ID
    var pid = nfcUtils.fromUTF8('0');

    var hs = [new MozNDEFRecord({tnf: NDEF.TNF_WELL_KNOWN,
                                 type: NDEF.RTD_HANDOVER_SELECT,
                                 payload: new Uint8Array(
                                  [0x12, 0xD1, 0x02, 0x04, 0x61, 0x63, cps,
                                   0x01, pid[0], 0x00])}),
              new MozNDEFRecord({tnf: NDEF.TNF_MIME_MEDIA,
                                 type: NDEF.MIME_BLUETOOTH_OOB,
                                 id: pid,
                                 payload: new Uint8Array(OOB)})];

    return hs;
  },

  /**
   * Returns an empty Handover Select NDEF message (i.e., a Hs message with no
   * AC).
   * @returns {Array} NDEF records for an empty handover select message.
   */
  encodeEmptyHandoverSelect: function encodeEmptyHandoverSelect() {
    var hs = [new MozNDEFRecord({tnf: NDEF.TNF_WELL_KNOWN,
                                 type: NDEF.RTD_HANDOVER_SELECT,
                                 payload: new Uint8Array([0x12])})];
    return hs;
  }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-AppWindowManager.html">AppWindowManager</a></li><li><a href="module-CardsHelper.html">CardsHelper</a></li><li><a href="module-Clock.html">Clock</a></li><li><a href="module-LockScreen.html">LockScreen</a></li><li><a href="module-LockScreenChargingStatus.html">LockScreenChargingStatus</a></li><li><a href="module-LockScreenWindowManager.html">LockScreenWindowManager</a></li><li><a href="module-OrientationManager.html">OrientationManager</a></li><li><a href="module-PopupWindow.html">PopupWindow</a></li><li><a href="module-SecureWindow.html">SecureWindow</a></li><li><a href="module-SecureWindowFactory.html">SecureWindowFactory</a></li><li><a href="module-SecureWindowManager.html">SecureWindowManager</a></li><li><a href="module-Service.html">Service</a></li><li><a href="module-SuspendingAppPriorityManager.html">SuspendingAppPriorityManager</a></li><li><a href="module-WallpaperManager.html">WallpaperManager</a></li><li><a href="module-WrapperFactory.html">WrapperFactory</a></li></ul><h3>Classes</h3><ul><li><a href="ActionMenu.html">ActionMenu</a></li><li><a href="Activities.html">Activities</a></li><li><a href="ActivityWindow.html">ActivityWindow</a></li><li><a href="ActivityWindowManager.html">ActivityWindowManager</a></li><li><a href="AppAuthenticationDialog.html">AppAuthenticationDialog</a></li><li><a href="AppChrome.html">AppChrome</a></li><li><a href="Applications.html">Applications</a></li><li><a href="AppModalDialog.html">AppModalDialog</a></li><li><a href="AppTransitionController.html">AppTransitionController</a></li><li><a href="AppWindowFactory.html">AppWindowFactory</a></li><li><a href="AttentionWindow.html">AttentionWindow</a></li><li><a href="AudioChannelService.html">AudioChannelService</a></li><li><a href="BaseModule.html">BaseModule</a></li><li><a href="BaseUI.html">BaseUI</a></li><li><a href="BluetoothCore.html">BluetoothCore</a></li><li><a href="BrowserContextMenu.html">BrowserContextMenu</a></li><li><a href="BrowserFrame.html">BrowserFrame</a></li><li><a href="CallForwarding.html">CallForwarding</a></li><li><a href="CallscreenWindow.html">CallscreenWindow</a></li><li><a href="CellBroadcastSystem.html">CellBroadcastSystem</a></li><li><a href="Clock.html">Clock</a></li><li><a href="ContextMenuView.html">ContextMenuView</a></li><li><a href="DeveloperHud.html">DeveloperHud</a></li><li><a href="DevToolsAuth.html">DevToolsAuth</a></li><li><a href="DialerAgent.html">DialerAgent</a></li><li><a href="EdgeSwipeDetector.html">EdgeSwipeDetector</a></li><li><a href="EuRoamingManager.html">EuRoamingManager</a></li><li><a href="ExternalStorageMonitor.html">ExternalStorageMonitor</a></li><li><a href="FxAccountsDialog.html">FxAccountsDialog</a></li><li><a href="GlobalOverlayWindow.html">GlobalOverlayWindow</a></li><li><a href="HardwareButtons.html">HardwareButtons</a></li><li><a href="HardwareButtonsBaseState.html">HardwareButtonsBaseState</a></li><li><a href="HardwareButtonsCameraState.html">HardwareButtonsCameraState</a></li><li><a href="HardwareButtonsHomeState.html">HardwareButtonsHomeState</a></li><li><a href="HardwareButtonsScreenshotState.html">HardwareButtonsScreenshotState</a></li><li><a href="HardwareButtonsSleepState.html">HardwareButtonsSleepState</a></li><li><a href="HardwareButtonsSystemLogState.html">HardwareButtonsSystemLogState</a></li><li><a href="HardwareButtonsVolumeState.html">HardwareButtonsVolumeState</a></li><li><a href="HardwareButtonsWakeState.html">HardwareButtonsWakeState</a></li><li><a href="HomeGesture.html">HomeGesture</a></li><li><a href="HomescreenLauncher.html">HomescreenLauncher</a></li><li><a href="HomescreenWindow.html">HomescreenWindow</a></li><li><a href="HomescreenWindowManager.html">HomescreenWindowManager</a></li><li><a href="ImeMenu.html">ImeMenu</a></li><li><a href="InputWindow.html">InputWindow</a></li><li><a href="InternetSharing.html">InternetSharing</a></li><li><a href="LayoutManager.html">LayoutManager</a></li><li><a href="LockScreenChargingStatus.html">LockScreenChargingStatus</a></li><li><a href="LockScreenNotifications.html">LockScreenNotifications</a></li><li><a href="LockScreenPasscodeValidator.html">LockScreenPasscodeValidator</a></li><li><a href="LockScreenWindow.html">LockScreenWindow</a></li><li><a href="LockScreenWindowManager.html">LockScreenWindowManager</a></li><li><a href="LogoLoader.html">LogoLoader</a></li><li><a href="LogShake.html">LogShake</a></li><li><a href="MediaRecording.html">MediaRecording</a></li><li><a href="MobileIdDialog.html">MobileIdDialog</a></li><li><a href="NfcCore.html">NfcCore</a></li><li><a href="NfcHandoverManager.html">NfcHandoverManager</a></li><li><a href="NfcManager.html">NfcManager</a></li><li><a href="PermissionManager.html">PermissionManager</a></li><li><a href="Places.html">Places</a></li><li><a href="PopupWindow.html">PopupWindow</a></li><li><a href="RemoteDebugger.html">RemoteDebugger</a></li><li><a href="Rocketbar.html">Rocketbar</a></li><li><a href="Screenshot.html">Screenshot</a></li><li><a href="SecureWindow.html">SecureWindow</a></li><li><a href="SecureWindowFactory.html">SecureWindowFactory</a></li><li><a href="SecureWindowManager.html">SecureWindowManager</a></li><li><a href="SettingsCore.html">SettingsCore</a></li><li><a href="SimLockSystemDialog.html">SimLockSystemDialog</a></li><li><a href="SimPinSystemDialog.html">SimPinSystemDialog</a></li><li><a href="SleepMenu.html">SleepMenu</a></li><li><a href="SoftwareButtonManager.html">SoftwareButtonManager</a></li><li><a href="SoundManager.html">SoundManager</a></li><li><a href="SourceView.html">SourceView</a></li><li><a href="SystemBanner.html">SystemBanner</a></li><li><a href="SystemDialogManager.html">SystemDialogManager</a></li><li><a href="TaskManager.html">TaskManager</a></li><li><a href="TelephonySettings.html">TelephonySettings</a></li><li><a href="TtlView.html">TtlView</a></li><li><a href="UsbStorage.html">UsbStorage</a></li><li><a href="VisibilityManager.html">VisibilityManager</a></li><li><a href="WallpaperManager.html">WallpaperManager</a></li></ul><h3>Events</h3><ul><li><a href="ActivityWindow.html#event:activitybackground">activitybackground</a></li><li><a href="ActivityWindow.html#event:activityclose">activityclose</a></li><li><a href="ActivityWindow.html#event:activityclosing">activityclosing</a></li><li><a href="ActivityWindow.html#event:activitycreated">activitycreated</a></li><li><a href="ActivityWindow.html#event:activityforeground">activityforeground</a></li><li><a href="ActivityWindow.html#event:activityopen">activityopen</a></li><li><a href="ActivityWindow.html#event:activityopening">activityopening</a></li><li><a href="ActivityWindow.html#event:activityrendered">activityrendered</a></li><li><a href="ActivityWindow.html#event:activityterminated">activityterminated</a></li><li><a href="ActivityWindow.html#event:activitywillrender">activitywillrender</a></li><li><a href="AppWindow.html#event:appclose">appclose</a></li><li><a href="AppWindow.html#event:appclosing">appclosing</a></li><li><a href="AppWindow.html#event:appopen">appopen</a></li><li><a href="AppWindow.html#event:appopening">appopening</a></li><li><a href="AttentionWindow.html#event:appclose">appclose</a></li><li><a href="AttentionWindow.html#event:appclosing">appclosing</a></li><li><a href="AttentionWindow.html#event:appopen">appopen</a></li><li><a href="AttentionWindow.html#event:appopening">appopening</a></li><li><a href="AttentionWindow.html#event:attentionclosed">attentionclosed</a></li><li><a href="AttentionWindow.html#event:attentionclosing">attentionclosing</a></li><li><a href="AttentionWindow.html#event:attentioncreated">attentioncreated</a></li><li><a href="AttentionWindow.html#event:attentionopened">attentionopened</a></li><li><a href="AttentionWindow.html#event:attentionopening">attentionopening</a></li><li><a href="AttentionWindow.html#event:attentionrendered">attentionrendered</a></li><li><a href="AttentionWindow.html#event:attentionterminated">attentionterminated</a></li><li><a href="AttentionWindow.html#event:attentionwillrender">attentionwillrender</a></li><li><a href="CallscreenWindow.html#event:appclose">appclose</a></li><li><a href="CallscreenWindow.html#event:appclosing">appclosing</a></li><li><a href="CallscreenWindow.html#event:appopen">appopen</a></li><li><a href="CallscreenWindow.html#event:appopening">appopening</a></li><li><a href="CallscreenWindow.html#event:attentionclosed">attentionclosed</a></li><li><a href="CallscreenWindow.html#event:attentionclosing">attentionclosing</a></li><li><a href="CallscreenWindow.html#event:attentioncreated">attentioncreated</a></li><li><a href="CallscreenWindow.html#event:attentionopened">attentionopened</a></li><li><a href="CallscreenWindow.html#event:attentionopening">attentionopening</a></li><li><a href="CallscreenWindow.html#event:attentionrendered">attentionrendered</a></li><li><a href="CallscreenWindow.html#event:attentionterminated">attentionterminated</a></li><li><a href="CallscreenWindow.html#event:attentionwillrender">attentionwillrender</a></li><li><a href="GlobalOverlayWindow.html#event:appclose">appclose</a></li><li><a href="GlobalOverlayWindow.html#event:appclosing">appclosing</a></li><li><a href="GlobalOverlayWindow.html#event:appopen">appopen</a></li><li><a href="GlobalOverlayWindow.html#event:appopening">appopening</a></li><li><a href="HardwareButtonsBaseState.html#event:wake">wake</a></li><li><a href="HardwareButtonsCameraState.html#event:camera">camera</a></li><li><a href="HardwareButtonsCameraState.html#event:holdcamera">holdcamera</a></li><li><a href="HardwareButtonsHomeState.html#event:holdhome">holdhome</a></li><li><a href="HardwareButtonsHomeState.html#event:home">home</a></li><li><a href="HardwareButtonsHomeState.html#event:volumedown+sleep">volumedown+sleep</a></li><li><a href="HardwareButtonsHomeState.html#event:volumeup+volumedown">volumeup+volumedown</a></li><li><a href="HardwareButtonsSleepState.html#event:holdsleep">holdsleep</a></li><li><a href="HardwareButtonsSleepState.html#event:sleep">sleep</a></li><li><a href="HardwareButtonsVolumeState.html#event:volumedown">volumedown</a></li><li><a href="HardwareButtonsVolumeState.html#event:volumeup">volumeup</a></li><li><a href="HardwareButtonsWakeState.html#event:holdhome">holdhome</a></li><li><a href="HardwareButtonsWakeState.html#event:holdsleep">holdsleep</a></li><li><a href="HomescreenLauncher.html#event:homescreen-changed">homescreen-changed</a></li><li><a href="HomescreenLauncher.html#event:homescreen-ready">homescreen-ready</a></li><li><a href="HomescreenWindow.html#event:appclose">appclose</a></li><li><a href="HomescreenWindow.html#event:appclosing">appclosing</a></li><li><a href="HomescreenWindow.html#event:appopen">appopen</a></li><li><a href="HomescreenWindow.html#event:appopening">appopening</a></li><li><a href="HomescreenWindow.html#event:homescreenbackground">homescreenbackground</a></li><li><a href="HomescreenWindow.html#event:homescreenclose">homescreenclose</a></li><li><a href="HomescreenWindow.html#event:homescreenclosed">homescreenclosed</a></li><li><a href="HomescreenWindow.html#event:homescreenclosing">homescreenclosing</a></li><li><a href="HomescreenWindow.html#event:homescreencreated">homescreencreated</a></li><li><a href="HomescreenWindow.html#event:homescreenforeground">homescreenforeground</a></li><li><a href="HomescreenWindow.html#event:homescreenopen">homescreenopen</a></li><li><a href="HomescreenWindow.html#event:homescreenopening">homescreenopening</a></li><li><a href="HomescreenWindow.html#event:homescreenrendered">homescreenrendered</a></li><li><a href="HomescreenWindow.html#event:homescreenterminated">homescreenterminated</a></li><li><a href="HomescreenWindow.html#event:homescreenwillrender">homescreenwillrender</a></li><li><a href="InputWindow.html#event:_ready">_ready</a></li><li><a href="InputWindow.html#event:appclose">appclose</a></li><li><a href="InputWindow.html#event:appclosing">appclosing</a></li><li><a href="InputWindow.html#event:appopen">appopen</a></li><li><a href="InputWindow.html#event:appopening">appopening</a></li><li><a href="InputWindow.html#event:mozbrowserresize">mozbrowserresize</a></li><li><a href="LayoutManager.html#event:system-resize">system-resize</a></li><li><a href="LockScreenWindow.html#event:appclose">appclose</a></li><li><a href="LockScreenWindow.html#event:appclosing">appclosing</a></li><li><a href="LockScreenWindow.html#event:appopen">appopen</a></li><li><a href="LockScreenWindow.html#event:appopening">appopening</a></li><li><a href="LockScreenWindow.html#event:lockscreen-appresize">lockscreen-appresize</a></li><li><a href="LockScreenWindow.html#~event:_withkeyboard">_withkeyboard</a></li><li><a href="LockScreenWindow.html#~event:_withoutkeyboard">_withoutkeyboard</a></li><li><a href="module-OrientationManager.html#event:reset-orientation">reset-orientation</a></li><li><a href="PopupWindow.html#event:appclose">appclose</a></li><li><a href="PopupWindow.html#event:appclosing">appclosing</a></li><li><a href="PopupWindow.html#event:appopen">appopen</a></li><li><a href="PopupWindow.html#event:appopening">appopening</a></li><li><a href="SecureWindow.html#event:appclose">appclose</a></li><li><a href="SecureWindow.html#event:appclosing">appclosing</a></li><li><a href="SecureWindow.html#event:appopen">appopen</a></li><li><a href="SecureWindow.html#event:appopening">appopening</a></li></ul><h3>Namespaces</h3><ul><li><a href="BrowserDB.html">BrowserDB</a></li><li><a href="BrowserDB.db.html">db</a></li></ul><h3>Global</h3><ul><li><a href="global.html#%2522_observe_vibration.enabled%2522">"_observe_vibration.enabled"</a></li><li><a href="global.html#_choiceFromDefaultAction">_choiceFromDefaultAction</a></li><li><a href="global.html#_debug">_debug</a></li><li><a href="global.html#_deleteAudioChannelFromInterruptedAudioChannels">_deleteAudioChannelFromInterruptedAudioChannels</a></li><li><a href="global.html#_fadeInFadedOutAudioChannels">_fadeInFadedOutAudioChannels</a></li><li><a href="global.html#_getDefaultPreferredNetworkType">_getDefaultPreferredNetworkType</a></li><li><a href="global.html#_getDefaultPreferredNetworkTypes">_getDefaultPreferredNetworkTypes</a></li><li><a href="global.html#_handle_audiochanneldestroyed">_handle_audiochanneldestroyed</a></li><li><a href="global.html#_handle_audiochannelstatechanged">_handle_audiochannelstatechanged</a></li><li><a href="global.html#_handle_hierarchytopmostwindowchanged">_handle_hierarchytopmostwindowchanged</a></li><li><a href="global.html#_handle_mozChromeEvent">_handle_mozChromeEvent</a></li><li><a href="global.html#_handleAudioChannel">_handleAudioChannel</a></li><li><a href="global.html#_isAudioChannelInBackground">_isAudioChannelInBackground</a></li><li><a href="global.html#_isNeededToFadeOutForActiveAudioChannel">_isNeededToFadeOutForActiveAudioChannel</a></li><li><a href="global.html#_isNeededToFadeOutForNewAudioChannel">_isNeededToFadeOutForNewAudioChannel</a></li><li><a href="global.html#_isNeededToResumeWhenOtherEndsForActiveAudioChannel">_isNeededToResumeWhenOtherEndsForActiveAudioChannel</a></li><li><a href="global.html#_isNeededToVibrateForActiveAudioChannel">_isNeededToVibrateForActiveAudioChannel</a></li><li><a href="global.html#_manageAudioChannels">_manageAudioChannels</a></li><li><a href="global.html#_resetAudioChannel">_resetAudioChannel</a></li><li><a href="global.html#_resumeAudioChannels">_resumeAudioChannels</a></li><li><a href="global.html#_sendContentEvent">_sendContentEvent</a></li><li><a href="global.html#_start">_start</a></li><li><a href="global.html#_stepReady">_stepReady</a></li><li><a href="global.html#active">active</a></li><li><a href="global.html#addObserver">addObserver</a></li><li><a href="global.html#applyPolicy">applyPolicy</a></li><li><a href="global.html#broadcast">broadcast</a></li><li><a href="global.html#checkTopSites">checkTopSites</a></li><li><a href="global.html#connected">connected</a></li><li><a href="global.html#destroy">destroy</a></li><li><a href="global.html#DownloadNotification">DownloadNotification</a></li><li><a href="global.html#enabled">enabled</a></li><li><a href="global.html#encodeEmptyHandoverSelect">encodeEmptyHandoverSelect</a></li><li><a href="global.html#encodeHandoverRequest">encodeHandoverRequest</a></li><li><a href="global.html#encodeHandoverSelect">encodeHandoverSelect</a></li><li><a href="global.html#ensureValueUnderKeyIsArray">ensureValueUnderKeyIsArray</a></li><li><a href="global.html#formatMAC">formatMAC</a></li><li><a href="global.html#FxaModuleCoppa">FxaModuleCoppa</a></li><li><a href="global.html#FxaModuleEnterEmail">FxaModuleEnterEmail</a></li><li><a href="global.html#FxaModuleEnterPassword">FxaModuleEnterPassword</a></li><li><a href="global.html#FxaModuleSetPassword">FxaModuleSetPassword</a></li><li><a href="global.html#FxaModuleSigninSuccess">FxaModuleSigninSuccess</a></li><li><a href="global.html#FxaModuleSignupSuccess">FxaModuleSignupSuccess</a></li><li><a href="global.html#getTopMostWindow">getTopMostWindow</a></li><li><a href="global.html#hasActiveCall">hasActiveCall</a></li><li><a href="global.html#idb">idb</a></li><li><a href="global.html#IGNORED_INPUT_TYPES">IGNORED_INPUT_TYPES</a></li><li><a href="global.html#initCallerIdPreference">initCallerIdPreference</a></li><li><a href="global.html#initPreferredNetworkType">initPreferredNetworkType</a></li><li><a href="global.html#initRoaming">initRoaming</a></li><li><a href="global.html#initVoicePrivacy">initVoicePrivacy</a></li><li><a href="global.html#launch">launch</a></li><li><a href="global.html#lockScreen">lockScreen</a></li><li><a href="global.html#parseBluetoothSSP">parseBluetoothSSP</a></li><li><a href="global.html#parseHandoverNDEF">parseHandoverNDEF</a></li><li><a href="global.html#parseMAC">parseMAC</a></li><li><a href="global.html#PRIORITIES">PRIORITIES</a></li><li><a href="global.html#registerHierarchy">registerHierarchy</a></li><li><a href="global.html#searchForBluetoothAC">searchForBluetoothAC</a></li><li><a href="global.html#sendNDEFMessageToNFCPeer">sendNDEFMessageToNFCPeer</a></li><li><a href="global.html#setVisits">setVisits</a></li><li><a href="global.html#SpinDatePicker">SpinDatePicker</a></li><li><a href="global.html#unregisterHierarchy">unregisterHierarchy</a></li><li><a href="global.html#validateCPS">validateCPS</a></li><li><a href="global.html#ValuePicker">ValuePicker</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.1</a> on Thu Jun 11 2015 15:15:40 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
