<!DOCTYPE html>
<html manifest="manifest.appcache">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="pragma" content="no-cache">
    <title>Clock</title>
    <link rel="stylesheet" type="text/css" href="style/clock.css">
    <link rel="resource" type="application/l10n" href="locale/clock.properties">
    <!-- Compatibility -->
    <script>
      if (document.location.protocol === 'file:') {
        var paths = document.location.pathname.split('/');
        paths.pop();
        paths.pop();
        paths.pop();
        var src = 'file://' + paths.join('/') + '/webapi.js';
      } else {
        var host = document.location.host;
        var domain = host.replace(/(^[\w\d]+\.)?([\w\d]+\.[a-z]+)/, '$2');
        var src = 'http://' + domain + '/webapi.js';
      }
      document.write('<script src="' + src + '"><\/script>');
    </script>
    <script type="application/javascript" src="js/clock.js"></script>
    <script type="application/javascript" src="js/stopwatch.js"></script>
    <script type="application/javascript" src="js/timer.js"></script>
  </head>

  <body class="hidden">
    <div id="views">
      <div id="stopwatch-view" class="view">
        <div class="chrono-view-container">
          <div>
            <div class="chrono-view" id="stopwatch-chrono-view">00:00</div>
          </div>
          <div class="ticker-view" id="stopwatch-ticker-view">
          </div>
        </div>

        <div id="reset-button" class="button-container" data-action="reset" onclick="StopWatch.execute(this.dataset.action)">
          <div>
            <span data-l10n-id="reset">Reset</span>
          </div>
        </div>

        <div id="stopwatch-action-button" class="button-container" data-action="start" onclick="StopWatch.execute(this.dataset.action)">
          <div>
            <span data-l10n-id="start">Start</span>
            <span data-l10n-id="stop">Stop</span>
          </div>
        </div>
      </div>

      <div id="timer-view" class="view" hidden="true">
        <div class="chrono-view-container">
          <div>
            <div class="chrono-view" id="timer-chrono-view">00:00</div>
          </div>
          <div class="ticker-view" id="timer-ticker-view">
          </div>
        </div>

        <div id="duration-button" class="button-container">
          <div>
            <input id="duration-field" type="text" value="02:00" required pattern="([0-9]{1,2}\:)+[0-5][0-9]" />
          </div>
        </div>

        <div id="timer-action-button" class="button-container" data-action="start" onclick="Timer.execute(this.dataset.action)">
          <div>
            <span data-l10n-id="start">Start</span>
            <span data-l10n-id="cancel">Cancel</span>
          </div>
        </div>
      </div>
    </div>
    <div id="tabs-container">
      <div id="tabs" onclick="choiceChanged(event.target)">
        <fieldset>
          <label id="stopwatch-label" for="stopwatch-choice" data-choice="stopwatch" data-active="true"><input id="stopwatch-choice" type="radio" name="tabs" checked="checked" /></label>
          <label id="timer-label" for="timer-choice" data-choice="timer"><input id="timer-choice" type="radio" name="tabs" checked="" /></label>
        </fieldset>
      </div>
    </div>

  </body>
</html>
