/**
 * TinySort is a small script that sorts HTML elements. It sorts by text- or attribute value, or by that of one of it's children.
 * @summary A nodeElement sorting script.
 * @version 2.1.2
 * @license MIT/GPL
 * @author Ron Valstar <ron@ronvalstar.nl> (http://www.sjeiti.com/)
 * @copyright Ron Valstar <ron@ronvalstar.nl>
 * @namespace tinysort
 */
!function(a,b){"use strict";function c(){return b}"function"==typeof define&&define.amd?define("tinysort",c):a.tinysort=b}(this,function(){"use strict";function a(a){function f(){0===arguments.length?j({}):d(arguments,function(a){j(c(a)?{selector:a}:a)}),q=C.length}function j(a){var b=!!a.selector,c=b&&":"===a.selector[0],d=e(a||{},s);C.push(e({bFind:b,bAttr:!(d.attr===i||""===d.attr),bData:d.data!==i,bFilter:c,mFilter:i,fnSort:d.sortFunction,iAsc:"asc"===d.order?1:-1},d))}function m(){d(a,function(a,b){x?x!==a.parentNode&&(D=!1):x=a.parentNode;var c=C[0],d=c.bFilter,e=c.selector,f=!e||d&&a.matchesSelector(e)||e&&a.querySelector(e),g=f?A:B,h={elm:a,pos:b,posn:g.length};z.push(h),g.push(h)}),w=A.slice(0)}function t(){A.sort(u)}function u(a,e){var f=0;for(0!==r&&(r=0);0===f&&q>r;){var i=C[r],j=i.ignoreDashes?o:n;if(d(p,function(a){var b=a.prepare;b&&b(i)}),i.sortFunction)f=i.sortFunction(a,e);else if("rand"==i.order)f=Math.random()<.5?1:-1;else{var k=h,m=b(a,i),s=b(e,i);if(!i.forceStrings){var t=c(m)?m&&m.match(j):h,u=c(s)?s&&s.match(j):h;if(t&&u){var v=m.substr(0,m.length-t[0].length),w=s.substr(0,s.length-u[0].length);v==w&&(k=!h,m=l(t[0]),s=l(u[0]))}}f=m===g||s===g?0:i.iAsc*(s>m?-1:m>s?1:0)}d(p,function(a){var b=a.sort;b&&(f=b(i,k,m,s,f))}),0===f&&r++}return 0===f&&(f=a.pos>e.pos?1:-1),f}function v(){var a=A.length===z.length;D&&a?(A.forEach(function(a){y.appendChild(a.elm)}),x.appendChild(y)):(A.forEach(function(a){var b=a.elm,c=k.createElement("div");a.ghost=c,b.parentNode.insertBefore(c,b)}),A.forEach(function(a,b){var c=w[b].ghost;c.parentNode.insertBefore(a.elm,c),c.parentNode.removeChild(c)}))}c(a)&&(a=k.querySelectorAll(a)),0===a.length&&console.warn("No elements to sort");var w,x,y=k.createDocumentFragment(),z=[],A=[],B=[],C=[],D=!0;return f.apply(i,Array.prototype.slice.call(arguments,1)),m(),t(),v(),A.map(function(a){return a.elm})}function b(a,b){var d,e=a.elm;return b.selector&&(b.bFilter?e.matchesSelector(b.selector)||(e=i):e=e.querySelector(b.selector)),b.bAttr?d=e.getAttribute(b.attr):b.useVal?d=e.value:b.bData?d=e.getAttribute("data-"+b.data):e&&(d=e.textContent),c(d)&&(b.cases||(d=d.toLowerCase()),d=d.replace(/\s+/g," ")),d}function c(a){return"string"==typeof a}function d(a,b){for(var c,d=a.length,e=d;e--;)c=d-e-1,b(a[c],c)}function e(a,b,c){for(var d in b)(c||a[d]===g)&&(a[d]=b[d]);return a}function f(a,b,c){p.push({prepare:a,sort:b,sortBy:c})}var g,h=!1,i=null,j=window,k=j.document,l=parseFloat,m=Array.prototype.indexOf,n=/(-?\d+\.?\d*)\s*$/g,o=/(\d+\.?\d*)\s*$/g,p=[],q=0,r=0,s={selector:i,order:"asc",attr:i,data:i,useVal:h,place:"start",returns:h,cases:h,forceStrings:h,ignoreDashes:h,sortFunction:i};return j.Element&&function(a){a.matchesSelector=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(a){for(var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;c[++d]&&c[d]!=b;);return!!c[d]}}(Element.prototype),e(f,{indexOf:m,loop:d}),e(a,{plugin:f,defaults:s})}());