<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <title>Facebook Link</title>

    <link rel="stylesheet" href="style/shared/core/css/root.css">
    <link rel="stylesheet" href="style/shared/lists/style.css">
    <link rel="stylesheet" href="style/shared/dialogs/style.css">

    <link rel="stylesheet" href="style/fb/headers/style.css">
    <link rel="stylesheet" href="style/fb/fbint.css">

    <style>
      li[data-uiid] * {
        pointer-events:none;
      }
    </style>
  </head>

  <body role="application" data-state="waiting">

    <section role="region" id="content">

      <header aria-level="1">
        <a href="#" onclick="parent.postMessage('window_close','*')">
                                  <span class="icon icon-close">close</span></a>
        <h1>Facebook Friends</h1>
      </header>

      <header aria-level="2">
        <h2>Select one of this possible matches for</h2>
      </header>

      <section id="main">
        <!-- Contacts List Section -->
        <section id='mainContent' data-state="selection">
          <ol id="friends-list" onclick="fb.link.ui.selected(event)">
            <li data-template data-uuid="#uid#">
              <img src="https://graph.facebook.com/#uid#/picture?type=square">
                <dl>
                  <dt>#name#</dt>
                  <dd>#email#</dd>
                </dl>
            </li>
          </ol>
        </section> <!-- mainContent -->

      <div id="options">
        <menu  class="bottom" type="toolbar">
          <button id="view-all"
            onclick="fb.link.ui.viewAllFriends(event)">View all Facebook Friends</button>
        </menu>
      </div>

    </section> <!-- main -->

    </section> <!-- role="region" -->

     <section id="curtain" role="region">
        <header>
          <h1>Facebook</h1>
        </header>
        <p class="message">Hold on. We are connecting
                                                to obtain your friend list</p>
        <hr>
        <p class="submessage">This may take a couple of minutes</p>
        <div>
          <img src="style/fb/throbber.gif">
        </div>
     </section>

    <script  src="js/utilities/templates.js"></script>
    <script  src="js/fb/fb_utils.js"></script>
    <script  src="oauth2/js/fbint_auth.js"></script>
    <script  src="js/fb/fb_oauth.js"></script>
    <script  src="js/fb/fb_data.js"></script>
    <script  src="js/fb/fb_contact.js"></script>
    <script  src="js/fb/fb_import.js"></script>
    <script  src="js/fb/fb_link.js"></script>

    <script>
      var cid = window.location.search.substring(fb.link.CID_PARAM.length + 2);

       // Module fb.contacts is initialized just in case we need it
      fb.contacts.init(function() {
         fb.link.getProposal(cid);
      });
    </script>
  </body>
</html>
