var fs = require('fs');
var util = require('util');
var Marionette = require('../lib/marionette/index');
var driver = new Marionette.Drivers.Tcp();

//var args = process.argv[2];
//
var script = function shitWorks() {
  document.body.addEventListener('load', function() {
    console.log('shit works!');
  });
}.toString();

var externalScript = fs.readFileSync(__dirname + '/external-script.js', 'utf8');

driver.connect(function() {
  var client = new Marionette.Client(driver, {
    defaultCallback: function(value) {
      console.log('--- response start --');
      console.log(arguments)
      console.log('--- response end --');
    }
  });


  client.
    startSession(function() {
      client.
        setScriptTimeout(10000).
        executeScript(function() {
          console.log('shit works');
        }).

        deleteSession();
    });
});

