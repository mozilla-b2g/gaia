<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: update_collection.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: update_collection.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

/* global BaseCollection, Icon, GridIconRenderer */
/* exported CollectionEditor */

var CollectionEditor = {
  init: function (options) {
    this.collection = BaseCollection.create(options.data);

    this.onsaved = options.onsaved;
    this.oncancelled = options.oncancelled;

    this.collectionTitle = document.getElementById('collection-title');
    this.collectionTitle.value = this.collection.name || '';

    this.collectionIcon = document.getElementById('collection-icon');
    this._renderIcon();
    
    this.header = document.getElementById('header');
    this.header.addEventListener('action', this.close.bind(this));

    this.saveButton = document.getElementById('done-button');
    this.saveListener = this.save.bind(this);
    this.saveButton.addEventListener('click', this.saveListener);

    this.form = document.querySelector('form');
    this.form.addEventListener('input', this._checkDoneButton.bind(this));
    this.form.addEventListener('submit', this._submit.bind(this));
    
    this.clearButton = document.getElementById('collection-title-clear');
    this.clearButton.addEventListener('touchstart',
                                       this._clearTitle.bind(this));
  },

  close: function() {
    this.oncancelled();
  },

  _renderIcon: function() {
    var icon = new Icon(this.collectionIcon, this.collection.icon);
    icon.render({
      type: GridIconRenderer.TYPE.CLIP
    });
  },

  _clearTitle: function(event) {
    event.preventDefault();
    this.collectionTitle.value = '';
    this._checkDoneButton();
  },

  _checkDoneButton: function() {
    // If name ﬁeld is blank, the “Done” button should be dimmed and inactive
    var title = this.collectionTitle.value.trim();
    this.saveButton.disabled = title === '';
  },

  /**
   * Handles the submit case for the form when the user presses the enter key.
   * @param {Event} event The form submit event.
   */
  _submit: function(event) {
    event.preventDefault();
    this.save();
  },

  save: function() {
    this.saveButton.removeEventListener('click', this.saveListener);
    var newName = this.collectionTitle.value;
    this.collection.rename(newName).then(() => this.onsaved());
  }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.1</a> on Thu Jul 23 2015 17:05:17 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
