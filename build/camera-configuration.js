'use strict';

var utils = require('./utils');

var configure = function(configurationObject, gaiaConfiguration) {
  var gaiaDirectory = gaiaConfiguration.GAIA_DIR;
  var maxImagePixelSize = configurationObject.maxImagePixelSize;
  customizeMaximumImageSize(maxImagePixelSize, gaiaDirectory);
};

// Customize the maximum image size for Camera and Gallery
var customizeMaximumImageSize = function(maxImagePixelSize, gaiaDirectory) {
  maxImagePixelSize = maxImagePixelSize || (5 * 1024 * 1024);
  let content =
    '// This file is automatically generated: DO NOT EDIT.\n' +
    '// To change this value, create a camera.json file in the\n' +
    '// distribution directory with content like this: \n' +
    '//   { "maxImagePixelSize": 6000000 }\n' +
    'var CONFIG_MAX_IMAGE_PIXEL_SIZE = ' + maxImagePixelSize + ';';

  let file = utils.getFile(gaiaDirectory, 'apps',
                           'camera', 'js', 'config.js');
  utils.writeContent(file, content);
  file = utils.getFile(gaiaDirectory, 'apps',
                       'gallery', 'js', 'config.js');
  utils.writeContent(file, content);
};

exports.configure = configure;
