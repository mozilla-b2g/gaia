before_install: travis_retry make node_modules
install: ./node_modules/.bin/travisaction $CI_ACTION install
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- ./node_modules/.bin/travisaction $CI_ACTION before_script
script: ./node_modules/.bin/travisaction $CI_ACTION script
after_script: ./node_modules/.bin/travisaction $CI_ACTION after_script
branches:
  only:
  - master
  - calendar-1.4-visual-refresh
env:
  matrix:
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=1
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=2
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=3
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=4
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=5
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=6
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=7
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=8
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=9
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=10
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=11
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=12
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=13
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=14
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=15
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=16
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=17
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=18
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=19
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=20
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=21
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=22
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=23
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=24
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=25
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=26
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=27
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=28
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=29
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=30
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=31
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=32
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=33
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=34
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=35
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=36
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=37
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=38
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=39
  - CI_ACTION=marionette_js TEST_FILES=apps/email/test/marionette/next_previous_test.js TRY=40
  global:
  - ARTIFACTS_S3_BUCKET=mozilla-releng-travis-uploads
  - secure: Gf2qm+xhLRTotuIvDD7HrNRmng3/dctGdsgF5P4aEu3nDujfxtZTp4sGirTqIngbfVzh9WkJ9eoT0yaDXtvWkr40Df6vwAUyI3P1x+NBOa2CkLz7U+f9j1yaJ3pJ121+L3o+7eTzJy/mvXHJYXAfa7rxcmjrCHpH5BSm+9/OZ4s=
  - secure: JgNTK2gfJY1UcpXU/j0MFUvB1P7GaQyOVKBT19uwE2xCsO+T00YWnEhDGFZ9CxYDsATQ5EG5cW/eaoqXOpI9QQsR5kEJp1N1rLvKliqtGcm/ocVjWl/dhsG1i+ksJSCm1oDwduEuLFZ7tChrXihiZ2Sn1RAWns0mjZw9+8+tDhU=
matrix:
  fast_finish: true
  allow_failures:
    - env: CI_ACTION=marionette_js_stable_check
notifications:
  email: false
  irc:
    on_success: change
    channels:
    - irc.mozilla.org#gaia
