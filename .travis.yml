before_install: "travis_retry npm install"
install: "./node_modules/.bin/travisaction $CI_ACTION install"
before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - "./node_modules/.bin/travisaction $CI_ACTION before_script"
script: "./node_modules/.bin/travisaction $CI_ACTION script"
branches:
  except:
    - v1-train
    - v1.1.0hd
    - v1.0.0
    - v1.0.1
env:
  - CI_ACTION=marionette_js TRY=1
  - CI_ACTION=marionette_js TRY=2
  - CI_ACTION=marionette_js TRY=3
  - CI_ACTION=marionette_js TRY=4
  - CI_ACTION=marionette_js TRY=5
  - CI_ACTION=marionette_js TRY=6
  - CI_ACTION=marionette_js TRY=7
  - CI_ACTION=marionette_js TRY=8
  - CI_ACTION=marionette_js TRY=9
  - CI_ACTION=marionette_js TRY=10
  - CI_ACTION=marionette_js TRY=11
  - CI_ACTION=marionette_js TRY=12
  - CI_ACTION=marionette_js TRY=13
  - CI_ACTION=marionette_js TRY=14
  - CI_ACTION=marionette_js TRY=15
  - CI_ACTION=marionette_js TRY=16
  - CI_ACTION=marionette_js TRY=17
  - CI_ACTION=marionette_js TRY=18
  - CI_ACTION=marionette_js TRY=19
  - CI_ACTION=marionette_js TRY=20
  - CI_ACTION=marionette_js TRY=21
matrix:
  allow_failures:
    - env: CI_ACTION=jshint
notifications:
  irc:
    on_success: change
    channels:
      - "irc.mozilla.org#gaia"
